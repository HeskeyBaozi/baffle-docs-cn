<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>baffle.js</title>
        <meta name="description" content="Baffle.js is a tiny (~1.8kb) javascript library for obfuscating and revealing text in DOM elements.">
        <link rel="stylesheet" href="./assets/css/main.min.css">
        <meta property="og:url" content="https://camwiegert.github.io/baffle">
        <meta property="og:type" content="website">
        <meta property="og:title" content="baffle.js">
        <meta property="og:description" content="a tiny (~1.8kb) javascript library for obfuscating and revealing text in DOM elements.">
        <meta property="og:image" content="https://camwiegert.github.io/baffle/assets/images/baffle.js.png">
    </head>
    <body>

        <header class="header">
            <h1 class="header-headline">baffle.js</h1>
            <h2 class="header-lead">一个极简的(~1.8kb)用于DOM元素文本乱码模糊再恢复JavaScript库</h2>
            <div class="header-actions">
                <a class="btn" href="https://github.com/camwiegert/baffle"><i class="octicon octicon-octoface"></i> 源代码</a>
                <a class="btn" href="https://raw.githubusercontent.com/camwiegert/baffle/master/dist/baffle.min.js"><i class="octicon octicon-cloud-download"></i> 下载</a>
                <a class="btn" href="#demo"><i class="octicon octicon-plug"></i> 示例</a>
                <a class="btn" href="https://npmjs.com/package/baffle"><i class="octicon octicon-package"></i> npm仓库</a>
            </div>
        </header>

<pre class="codeBlock"><code class="javascript">// 在任意元素上进行乱码模糊.
let b = baffle('.someSelector').start();
// 同样也适用于其他某些异步方法.
someAsyncFunction(result => {
    // 用异步获得的文本替换当前文本, 并在1500ms内恢复正常文字.
    b.text(currentText => result.text).reveal(1500);
});
</code></pre>

        <section id="install">
            <div class="wrap">
                <h3 class="sectionHeader"><a href="#install">获取baffle.js</a></h3>
                <p>你可以<a href="https://raw.githubusercontent.com/camwiegert/baffle/master/dist/baffle.min.js">下载最新发布的版本</a>并且在包含引入到你的网页中(<code>window.baffle</code>), 或者直接通过<a href="https://npmjs.com/package/baffle">NPM</a>安装.</p>
            </div>
            <pre class="codeBlock nohighlight"><code>$ npm install --save baffle</code></pre>
        </section>

        <section id="basics">
            <div class="wrap">
                <h3 class="sectionHeader"><a href="#basics">基本用法</a></h3>
                <p>在baffle安装好后, 只需简单的调用 <code>baffle()</code> 并传入参数来实例化一个 <code>baffle</code> 对象. 参数可以是是以CSS选择器, 单一节点或者节点列表(NodeList). 你也可以额外传入一个 <code>options</code> 对象.</p>
                <p class="dom-warning"><small><i class="octicon octicon-alert"></i> baffle的效果是作用于 <code>node.textContent</code> 上的, 所以这个效果也会影响到其子元素. 最好的办法就是在没有子结点的元素上使用baffle.</small></p>
            </div>
<pre class="codeBlock"><code class="javascript">// b 是一个 baffle 实例
// 使用CSS选择器
let b = baffle('.headline');

// 使用单一节点
let b = baffle(document.querySelector('.headline'));

// 使用节点列表
let b = baffle(document.querySelectorAll('a'));

// 传入options对象
let b = baffle('.headline', {
    characters: 'abcdefghijklmnopqrstuvwxyz',
    speed: 75
});
</code></pre>
            <div class="wrap">
                <p>实例化baffle之后, 你可以通过使用 <code>start()</code> 方法来开始进行乱码模糊, 通过使用 <code>stop()</code> 方法来暂停, 或者通过 <code>reveal()</code> 方法来恢复到正常文本.</p>
            </div>
<pre class="codeBlock"><code class="javascript">// 开始进行乱码模糊
b.start();

// 暂停乱码模糊
b.stop();

// 立刻恢复正常文本
b.reveal();

// 在1000ms内恢复正常文本
b.reveal(1000);
</code></pre>
            <div class="wrap">
                <p>同样地, 你可以在任何时间内调用 <code>text()</code> 来改变包含于 <code>baffle</code> 实例中的文本, 或者调用 <code>set()</code> 来改变 <code>options</code> 对象.</p>
            </div>
<pre class="codeBlock"><code class="javascript">/**
* text() 方法接收一个函数, 这个函数的唯一参数是
* 目前baffle实例中的文本, 并返回一个新的文本.
*/
b.text(currentText => currentText + '!');

// set() 方法接收一个 options 对象.
b.set({
    speed: 100,
    characters: '+-•~!=*'
});

// 只需在 options 对象中写入你想覆盖的属性
b.set({
    speed: 40
});
</code></pre>
        </section>

        <section id="methods">
            <div class="wrap">
                <h3 class="sectionHeader"><a href="#methods">方法 (Methods)</a></h3>
                <p>baffle实例拥有6个可以链式调用的方法.</p>
                <ul class="docList">
                    <li class="docList-item">
                        <h5 class="docList-header"><code>baffle.once()</code></h5>
                        <div class="docList-info">
                            <p>通过使用 <code>options.characters</code> 属性进行一次乱码处理.</p>
                        </div>
                    </li>
                    <li class="docList-item">
                        <h5 class="docList-header"><code>baffle.start()</code></h5>
                        <div class="docList-info">
                            <p>在被baffle实例包裹的元素节点上进行乱码模糊, 更新速度由 <code>options.speed</code> (ms)来确定.</p>
                        </div>
                    </li>
                    <li class="docList-item">
                        <h5 class="docList-header"><code>baffle.stop()</code></h5>
                        <div class="docList-info">
                            <p>暂停乱码效果. 注意, 这样并不会使你的元素的文字恢复正常, 只是暂停模糊变换而已. 要想文字恢复, 请使用 <code>reveal()</code> 方法.</p>
                        </div>
                    </li>
                    <li class="docList-item">
                        <h5 class="docList-header"><code>baffle.reveal([duration], [delay])</code></h5>
                        <div class="docList-info">
                            <p>在持续时间 <code>duration</code> (ms)内(默认值为0)使得文本模糊褪去, 恢复正常文字. 通过配置 <code>delay</code> (ms)参数规定延迟调用时间.</p>
                        </div>
                    </li>
                    <li class="docList-item">
                        <h5 class="docList-header"><code>baffle.set([options])</code></h5>
                        <div class="docList-info">
                            <p>通过传入 <code>options</code> 对象来更新覆盖实例中的选项设置. 传入对象的属性数量任意, 而且你也可以在baffle运行时设置.</p>
                        </div>
                    </li>
                    <li class="docList-item">
                        <h5 class="docList-header"><code>baffle.text(fn)</code></h5>
                        <div class="docList-info">
                            <p>通过使用函数 <code>fn</code> 来更新你baffle实例中的每一个元素节点的文本. 该函数接受当前元素节点的文本作为唯一参数. 函数 <code>fn</code> 的返回值将作为新的文本来替换掉旧文本.</p>
                        </div>
                    </li>
                </ul>
            </div>
        </section>

        <section id="options">
            <div class="wrap">
                <h3 class="sectionHeader"><a href="#options">选项 (options)</a></h3>
                <p>你可以在baffle实例化或者使用 <code>set()</code> 方法设置baffle实例的时候传入一个 options 对象.</p>
            </div>
<pre class="codeBlock"><code class="javascript">// 进行实例化
baffle('.someSelector', {
    characters: 'supercalifragilisticexpialidocious',
    speed: 150
});

// 实例化之后的任何时机
baffle('.someSelector')
    .start()
    .set({
        characters: 'supercalifragilisticexpialidocious',
        speed: 150
    });
</code></pre>
            <div class="wrap">
                <h4>可用选项属性</h4>
                <ul class="docList">
                    <li class="docList-item">
                        <h5 class="docList-header"><code>options.characters</code></h5>
                        <div class="docList-info">
                            <p>baffle在用来进行乱码模糊使用的 "乱码" 字符. 它可以是一个字符串或者是一个元素是单个字符的数组.</p>
                            <p class="nowrap"><strong>默认值:</strong> <code>'AaBbCcDdEeFfGgHhIiJjKkLlMmNnOoPpQqRrSsTtUuVvWwXxYyZz~!@#$%^&amp;*()-+=[]{}|;:,./&lt;&gt;?'</code></p>
                        </div>
                    </li>
                    <li class="docList-item">
                        <h5 class="docList-header"><code>options.exclude</code></h5>
                        <div class="docList-info">
                            <p>baffle进行乱码模糊时, 会忽略该属性设置的特定字符. 它可以是一个元素是单个字符的数组.</p>
                            <p class="nowrap"><strong>默认值:</strong> <code>[' ']</code></p>
                        </div>
                    </li>
                    <li class="docList-item">
                        <h5 class="docList-header"><code>options.speed</code></h5>
                        <div class="docList-info">
                            <p>这是用来表示baffle乱码模糊化时的更新频率.</p>
                            <p class="nowrap"><strong>Default:</strong> <code>50</code></p>
                        </div>
                    </li>
                </ul>
            </div>
        </section>

        <section id="demo">
            <div class="wrap">
                <h3 class="sectionHeader"><a href="#demo">示例</a></h3>
                <div class="demo-text js-demo">The quick brown fox jumps over the lazy dog.</div>
                <div class="demo-buttons">
                    <a href="#" class="btn js-demo-once"><code>once()</code></a>
                    <a href="#" class="btn js-demo-start"><code>start()</code></a>
                    <a href="#" class="btn js-demo-stop"><code>stop()</code></a>
                    <a href="#" class="btn js-demo-reveal"><code>reveal(1000)</code></a>
                    <a href="#" class="btn js-demo-text"><code>text(text => reverse(text))</code></a>
                </div>
            </div>
        </section>

        <section id="support">
            <div class="wrap">
                <h3 class="sectionHeader"><a href="#support">浏览器兼容性</a></h3>
                <ul>
                    <li><i class="octicon octicon-check"></i> 所有现代浏览器</li>
                    <li><i class="octicon octicon-check"></i> IE9+</li>
                </ul>
                <p>当你遇到任何问题时, 欢迎<a href="https://github.com/camwiegert/baffle/issues">提出问题到issues</a></p>
            </div>
        </section>

        <section class="wrap">
                <div><strong>许可协议: </strong> MIT</div>
                <div><strong>作者: </strong> <a href="http://camwiegert.com">Cam Wiegert</a></div>
                <div><strong>灵感来源: </strong> <a href="http://oak.is/">Oak</a></div>
                <div><strong>Language: </strong> <a href="https://camwiegert.github.io/baffle/">English</a></div>
        </section>

        <script src="./dist/baffle.min.js"></script>
        <script src="./assets/js/main.bundle.js"></script>
        <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
          ga('create', 'UA-58507732-4', 'auto');
          ga('send', 'pageview');
        </script>
    </body>
</html>
